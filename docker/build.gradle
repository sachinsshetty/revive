task buildAll(type: Exec) {
    dependsOn ":server:build, :client:buildReactApp"
    commandLine( 'echo', ' BuildSuccessful' )
}

task createClientDockerImage(type: Exec) {
    dependsOn ":client:buildClientDocker"
    commandLine 'docker', 'build', '--rm', '.', '-t', "slabstech/revive-client:2.0.0", "-f", "client/Dockerfile"
}    

task createServerDockerImage(type: Exec) {
    dependsOn ":server:buildServerDocker"
    commandLine 'docker', 'build', '--rm', '.', '-t', "slabstech/revive-server:2.0.0", "-f", "server/Dockerfile"
}


task createDBDockerImage(type: Exec) {
    commandLine 'docker', 'build', '--rm', '.', '-t', "slabstech/revive-db:2.0.0", "-f", "db/Dockerfile"
}

task createAppDockerImages(type: Exec) {
    dependsOn "createDBDockerImage", "createServerDockerImage", "createClientDockerImage"
    commandLine 'echo', 'success create images'
}    


task runAppDocker(type: Exec) {
    dependsOn "createAppDockerImages"
    commandLine 'docker-compose', 'up'
}

task stopAppDocker(type: Exec) {
    commandLine 'docker-compose', 'down'
}
